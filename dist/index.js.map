{"version":3,"file":"index.js","mappings":"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","sources":["webpack://dyna-error/webpack/universalModuleDefinition","webpack://dyna-error/./src/dynaError.ts","webpack://dyna-error/webpack/bootstrap","webpack://dyna-error/webpack/runtime/define property getters","webpack://dyna-error/webpack/runtime/hasOwnProperty shorthand","webpack://dyna-error/webpack/runtime/make namespace object","webpack://dyna-error/./src/index.ts"],"sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine(\"dyna-error\", [], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"dyna-error\"] = factory();\n\telse\n\t\troot[\"dyna-error\"] = factory();\n})(global, () => {\nreturn ","export interface IErrorConfig {\n  /**\n   * Error message intended for debugging purposes.\n   */\n  message: string;\n\n  /**\n   * User-friendly error message, ideally translated and devoid of sensitive information.\n   */\n  userMessage?: string;\n\n  /**\n   * Developer-assigned error code for identifying the point where the error occurred.\n   */\n  code?: number;\n\n  /**\n   * Network error status, which can be an HTTP code or any status understandable by other parts of the application.\n   */\n  status?: number;\n\n  /**\n   * Error data intended for debugging, may contain sensitive information.\n   */\n  data?: any;\n\n  /**\n   * Error data that can be safely delivered to the client or end-user.\n   */\n  userData?: any;\n\n  /**\n   * Reference to the parent error.\n   */\n  parentError?: any;\n\n  /**\n   * Validation errors associated with the error.\n   */\n  validationErrors?: any;\n\n  /**\n   * Stack trace representing the error.\n   *\n   * Collect stack or not.\n   * For security reasons (if the error is shipped to the client) might be not wanted.\n   *\n   * @default true\n   */\n  stack?: boolean;      // Do not collect stack (for security reasons)\n\n  /**\n   * Indicates whether the action that caused this error can be retried.\n   */\n  canRetry?: boolean;\n\n  /**\n   * If code is defined, the error message will be prefixed with the error code.\n   *\n   * @default false\n   */\n  prefixMessageWithCode?: boolean;\n\n  // For internal use, do not use it!.\n  _applyStackContent?: any;\n}\n\nexport interface IDynaError extends Error {\n  date?: Date;\n  message: string;\n  userMessage?: string;\n  code?: number;\n  status?: number;\n  data?: any;\n  userData?: any;\n  parentError?: any;\n  stack?: string;\n  validationErrors?: any;\n  canRetry?: boolean;\n  isDynaError?: true;\n}\n\nexport const dynaError = (\n  errorArg:\n    | string\n    | Error\n    | IErrorConfig\n    | unknown,\n): IDynaError => {\n  if (typeof errorArg === \"string\") {\n    return dynaErrorByIDynaError({message: errorArg});\n  }\n  if (errorArg instanceof Error) {\n    return dynaError({\n      message: errorArg.message,\n      _applyStackContent: errorArg.stack,\n    });\n  }\n  if (errorArg && (errorArg as any)?.message) {\n    return dynaErrorByIDynaError(errorArg as any);\n  }\n  // This is a case of something strage unknown\n  return dynaError({\n    message: \"Unknown nature of error\",\n    parentError: {error: errorArg},\n  });\n};\n\nconst dynaErrorByIDynaError = (\n  {\n    message,\n    userMessage,\n    code,\n    status,\n    data,\n    userData,\n    parentError,\n    validationErrors,\n    stack = true,\n    _applyStackContent,\n    canRetry,\n    prefixMessageWithCode = false,\n  }: IErrorConfig,\n): IDynaError => {\n  const fullMessage = [\n    code !== undefined && prefixMessageWithCode\n      ? `${code}:`\n      : '',\n    message,\n  ]\n    .filter(Boolean)\n    .join(' ');\n  return removeUndefined({\n    date: new Date(),\n    name: 'Error',\n    code,\n    status,\n    message: fullMessage,\n    userMessage,\n    data,\n    userData,\n    parentError,\n    validationErrors,\n    canRetry,\n    stack:\n      _applyStackContent\n        ? _applyStackContent\n        : stack\n          ? new Error(fullMessage).stack\n          : undefined,\n    isDynaError: true,\n  });\n};\n\nconst removeUndefined = (data: Record<string, any>): any => {\n  for (const key in data) {\n    if (data[key] === undefined) delete data[key];\n  }\n  return data;\n};\n","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","export {\n  dynaError,\n  IErrorConfig,\n  IDynaError,\n} from \"./dynaError\";\n"],"names":["dynaError","errorArg","dynaErrorByIDynaError","message","Error","_applyStackContent","stack","parentError","error","_dynaError","_ref","userMessage","code","status","data","userData","validationErrors","_ref$stack","canRetry","_ref$prefixMessageWit","prefixMessageWithCode","fullMessage","undefined","concat","filter","Boolean","join","removeUndefined","date","Date","name","isDynaError","key"],"sourceRoot":""}